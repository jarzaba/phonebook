{"version":3,"sources":["services/crud.js","components/AddPersonForm.jsx","components/FilterRecords.jsx","components/ShowPersons.jsx","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","nameObject","post","id","delete","put","AddPersonForm","addNumber","handleNumberChange","handlePersonChange","onSubmit","onChange","type","style","width","FilterRecords","persons","filter","handleDelete","person","name","includes","map","key","number","value","onClick","window","confirm","ShowPersons","handleFilterChange","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","setFilter","useEffect","console","log","crudOperations","numbersFromDB","catch","err","length","changeNumber","oldName","returnedRecord","event","target","preventDefault","nameMatch","find","concat","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.58ce7be9.chunk.js","sourcesContent":["import axios from 'axios';\nconst baseUrl = '/api/persons';\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then((response) => response.data);\n};\n\nconst addRecord = (nameObject) => {\n  const request = axios.post(baseUrl, nameObject);\n  return request.then((response) => response.data);\n};\n\nconst updateRecord = (id, nameObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, nameObject);\n  return request.then((response) => response.data);\n};\n\nconst deleteRecord = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request.then((response) => response.data);\n};\n\nexport default { getAll, addRecord, deleteRecord, updateRecord };\n","import React from 'react';\nimport '../styles/phonebook.css';\n\nconst AddPersonForm = ({\n  addNumber,\n  handleNumberChange,\n  handlePersonChange,\n}) => (\n  <form onSubmit={addNumber}>\n    <table>\n      <tbody>\n        <tr>\n          <td> Name</td>\n          <td>\n            <input onChange={handlePersonChange} />\n          </td>\n        </tr>\n        <tr>\n          <td> Number</td>\n          <td>\n            <input onChange={handleNumberChange} />\n          </td>\n        </tr>\n\n        <tr>\n          <td></td>\n          <td>\n            <button type='submit' style={{ width: '100%' }}>\n              Add\n            </button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </form>\n);\nexport default AddPersonForm;\n","import React from 'react';\nimport '../styles/phonebook.css';\n\nconst FilterRecords = ({ persons, filter, handleDelete }) => {\n  return (\n    <table>\n      <tbody>\n        {persons\n          .filter((person) => person.name.includes(filter))\n          .map((person) => (\n            <tr key={person.name}>\n              <td>{person.name}</td>\n              <td>{person.number}</td>\n              <td>\n                <button\n                  value={person.id}\n                  key={person.id}\n                  onClick={() => {\n                    if (\n                      window.confirm(\n                        `Are you sure you wish to delete ${person.name}?`\n                      )\n                    )\n                      handleDelete(person.id);\n                  }}\n                >\n                  Delete\n                </button>\n              </td>\n            </tr>\n          ))}\n      </tbody>\n    </table>\n  );\n};\n\nexport default FilterRecords;\n","import React from 'react';\nimport '../styles/phonebook.css';\n\nconst ShowPersons = ({ handleFilterChange }) => (\n  <div>\n    <table>\n      <tbody>\n        <tr>\n          <td>Search</td>\n          <td>\n            <input onChange={handleFilterChange} />\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n);\n\nexport default ShowPersons;\n","import React, { useState, useEffect } from 'react';\nimport crudOperations from './services/crud';\nimport AddPersonForm from './components/AddPersonForm';\nimport FilterRecords from './components/FilterRecords';\nimport ShowPersons from './components/ShowPersons';\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [filter, setFilter] = useState('');\n\n  useEffect(() => {\n    console.log('effect');\n    crudOperations\n      .getAll()\n      .then((numbersFromDB) => {\n        console.log('promise fulfilled');\n        setPersons(numbersFromDB);\n      })\n      .catch((err) => {\n        console.log('ERROR: could not fetch data');\n      });\n  }, []);\n  console.log('render', persons.length, 'persons');\n\n  const addNumber = (event) => {\n    event.preventDefault();\n    const nameObject = {\n      name: newName,\n      number: newNumber,\n    };\n    console.log(persons);\n    console.log(newName);\n    console.log(nameObject);\n\n    const nameMatch = persons.find(({ name }) => name === newName);\n    console.log('Osuuko nimi?', nameMatch);\n    if (nameMatch) {\n      changeNumber(nameMatch);\n    } else {\n      crudOperations\n        .addRecord(nameObject)\n        .then((returnedRecord) => {\n          console.log('SUCCESS: number added;');\n          setPersons(persons.concat(returnedRecord));\n          setNewName('');\n          setNewNumber('');\n        })\n        .catch((err) => {\n          console.log('ERROR: could not addNumber');\n        });\n    }\n  };\n\n  const changeNumber = (oldName) => {\n    if (\n      window.confirm(\n        `${newName} is already added to the phonebook, replace the old number with a new one?`\n      )\n    ) {\n      const nameObject = {\n        name: newName,\n        number: newNumber,\n      };\n\n      console.log('ja nimi on ', oldName.name, oldName.id);\n\n      crudOperations\n        .updateRecord(oldName.id, nameObject)\n        .then((returnedRecord) => {\n          console.log('SUCCESS: number UPDATED;');\n          setPersons(\n            persons.map((person) =>\n              person.name !== newName ? person : returnedRecord\n            )\n          );\n          setNewName('');\n          setNewNumber('');\n        })\n        .catch((err) => {\n          console.log('ERROR: could not UPDATE Number');\n        });\n    }\n  };\n\n  const handleDelete = (person) => {\n    crudOperations.deleteRecord(person).then(\n      crudOperations.getAll().then((numbersFromDB) => {\n        setPersons(numbersFromDB);\n      })\n    );\n  };\n\n  const handleFilterChange = (event) => {\n    console.log(event.target.value);\n    setFilter(event.target.value);\n  };\n\n  const handlePersonChange = (event) => {\n    console.log(event.target.value);\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = (event) => {\n    console.log(event.target.value);\n    setNewNumber(event.target.value);\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n\n      <ShowPersons handleFilterChange={handleFilterChange} />\n\n      <h2>Add new number</h2>\n\n      <AddPersonForm\n        {...{ addNumber, handleNumberChange, handlePersonChange }}\n      />\n\n      <h2>Numbers</h2>\n\n      <FilterRecords {...{ persons, filter, handleDelete }} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}